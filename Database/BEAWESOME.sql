set echo on;

CREATE TABLE BUYER
  (
    BUYER_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    FIRST_NAME          CHAR (256) ,
    LAST_NAME           CHAR (256) ,
    STREET              CHAR (256) ,
    CITY                CHAR (256) ,
    STATE               CHAR (256) ,
    ZIP                 CHAR (256) ,
    SALE_INVOICE_NUMBER CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    PATRON_PATRON_ID CHAR
    --  WARNING: CHAR size not specified
  ) ;
CREATE UNIQUE INDEX BUYER__IDX ON BUYER
  (
    PATRON_PATRON_ID ASC
  )
  ;
ALTER TABLE BUYER ADD CONSTRAINT BUYER_PK PRIMARY KEY ( BUYER_ID ) ;


CREATE TABLE CAST
  (
    CHARACTER  CHAR (256) ,
    MEMBERS_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    CAST_ID UNKNOWN
    --  ERROR: Datatype UNKNOWN is not allowed
    NOT NULL
  ) ;
ALTER TABLE CAST ADD CONSTRAINT CAST_PK PRIMARY KEY ( CAST_ID ) ;


CREATE TABLE CAST_IN
  (
    CAST_ID UNKNOWN
    --  ERROR: Datatype UNKNOWN is not allowed
    NOT NULL ,
    PRODUCTION_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL
  ) ;
ALTER TABLE CAST_IN ADD CONSTRAINT Relation_3_PK PRIMARY KEY ( CAST_ID, PRODUCTION_ID ) ;


CREATE TABLE COST
  (
    AMOUNT                   NUMBER ,
    REASON                   CHAR (256) ,
    PRODUCTION_PRODUCTION_ID CHAR
    --  WARNING: CHAR size not specified
  ) ;


CREATE TABLE COUNCILMAN
  (
    POSTITION  CHAR (256) ,
    YEAR       CHAR (256) ,
    MEMBERS_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL
  ) ;


CREATE TABLE DUES
  (
    PAID_FULL          CHAR (1) ,
    PAID_AMOUNT        NUMBER ,
    YEAR               CHAR (256) ,
    MEMBERS_MEMBERS_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL
  ) ;


CREATE TABLE JOB
  (
    JOB                      CHAR (256) ,
    PRODUCTION_PRODUCTION_ID CHAR
    --  WARNING: CHAR size not specified
    ,
    JOB_ID NUMBER NOT NULL
  ) ;
ALTER TABLE JOB ADD CONSTRAINT JOB_PK PRIMARY KEY ( JOB_ID ) ;
-- Error - Unique Constraint JOB.JOB_JOB_ID1_UN doesn't have columns 

CREATE TABLE MEMBERS
  (
    MEMBERS_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    FIRST_NAME CHAR (256) ,
    LAST_NAME  CHAR (256) ,
    ROLE       CHAR (256) ,
    PHONE      CHAR (256) ,
    EMAIL      CHAR (256) ,
    STREET     CHAR (256) ,
    CITY       CHAR (256) ,
    STATE      CHAR (256) ,
    ZIP        CHAR (256) ,
    JOIN_DATE  DATE ,
    ACTIVE     CHAR (1)
  ) ;
ALTER TABLE MEMBERS ADD CONSTRAINT MEMBERS_PK PRIMARY KEY ( MEMBERS_ID ) ;


CREATE TABLE PATRON
  (
    PATRON_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    FIRST_NAME     CHAR (256) ,
    LAST_NAME      CHAR (256) ,
    STREET         CHAR (256) ,
    CITY           CHAR (256) ,
    STATE          CHAR (256) ,
    ZIP            CHAR (256) ,
    BUYER_BUYER_ID CHAR
    --  WARNING: CHAR size not specified
  ) ;
CREATE UNIQUE INDEX PATRON__IDX ON PATRON
  (
    BUYER_BUYER_ID ASC
  )
  ;
ALTER TABLE PATRON ADD CONSTRAINT PATRON_PK PRIMARY KEY ( PATRON_ID ) ;


CREATE TABLE PLAY
  (
    PLAY_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    NAME              CHAR (256) ,
    ACTS              NUMBER ,
    AUTHOR_FIRST_NAME CHAR (256) ,
    AUTHOR_LAST_NAME  CHAR (256) ,
    TYPE              CHAR (256)
  ) ;
ALTER TABLE PLAY ADD CONSTRAINT PLAY_PK PRIMARY KEY ( PLAY_ID ) ;


CREATE TABLE PRODUCTION
  (
    PRODUCTION_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    "DATE"       DATE ,
    EVALUATION   CHAR (256) ,
    PLAY_PLAY_ID CHAR
    --  WARNING: CHAR size not specified
    ,
    MEMBERS_MEMBERS_ID CHAR
    --  WARNING: CHAR size not specified
  ) ;
ALTER TABLE PRODUCTION ADD CONSTRAINT PRODUCTION_PK PRIMARY KEY ( PRODUCTION_ID ) ;


CREATE TABLE SALE
  (
    INVOICE_NUMBER CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    "DATE" DATE
  ) ;
ALTER TABLE SALE ADD CONSTRAINT SALE_PK PRIMARY KEY ( INVOICE_NUMBER ) ;


CREATE TABLE SPECIALIST
  (
    SPECIALIST_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    FIRST_NAME CHAR (256) ,
    LAST_NAME  CHAR (256) ,
    PAY        NUMBER
  ) ;
ALTER TABLE SPECIALIST ADD CONSTRAINT SPECIALIST_PK PRIMARY KEY ( SPECIALIST_ID ) ;


CREATE TABLE SPONSOR
  (
    NAME       CHAR (256) ,
    DONATION   NUMBER ,
    SPONSOR_ID NUMBER NOT NULL
  ) ;
ALTER TABLE SPONSOR ADD CONSTRAINT SPONSOR_PK PRIMARY KEY ( SPONSOR_ID ) ;
-- Error - Unique Constraint SPONSOR.SPONSOR_SPONSOR_ID1_UN doesn't have columns 

CREATE TABLE SPONSORED_BY
  (
    SPONSOR_ID    NUMBER NOT NULL ,
    PRODUCTION_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL
  ) ;
ALTER TABLE SPONSORED_BY ADD CONSTRAINT Relation_14_PK PRIMARY KEY ( SPONSOR_ID, PRODUCTION_ID ) ;


CREATE TABLE TICKET
  (
    TICKET_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    PRICE                    NUMBER ,
    SEATNUM                  CHAR (256) ,
    PRODUCTION_PRODUCTION_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    SALE_INVOICE_NUMBER CHAR
    --  WARNING: CHAR size not specified
    NOT NULL
  ) ;
ALTER TABLE TICKET ADD CONSTRAINT TICKET_PK PRIMARY KEY ( TICKET_ID ) ;


CREATE TABLE WORKING_MEM
  (
    MEMBERS_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL ,
    JOB_ID NUMBER NOT NULL
  ) ;
ALTER TABLE WORKING_MEM ADD CONSTRAINT WORKING_MEM_PK PRIMARY KEY ( MEMBERS_ID, JOB_ID ) ;


CREATE TABLE WORKING_SPEC
  (
    JOB_ID        NUMBER NOT NULL ,
    SPECIALIST_ID CHAR
    --  WARNING: CHAR size not specified
    NOT NULL
  ) ;
ALTER TABLE WORKING_SPEC ADD CONSTRAINT WORKING_SPEC_PK PRIMARY KEY ( JOB_ID, SPECIALIST_ID ) ;


ALTER TABLE BUYER ADD CONSTRAINT BUYER_SALE_FK FOREIGN KEY ( SALE_INVOICE_NUMBER ) REFERENCES SALE ( INVOICE_NUMBER ) ;

ALTER TABLE CAST ADD CONSTRAINT CAST_MEMBERS_FK FOREIGN KEY ( MEMBERS_ID ) REFERENCES MEMBERS ( MEMBERS_ID ) ;

ALTER TABLE COST ADD CONSTRAINT COST_PRODUCTION_FK FOREIGN KEY ( PRODUCTION_PRODUCTION_ID ) REFERENCES PRODUCTION ( PRODUCTION_ID ) ;

ALTER TABLE COUNCILMAN ADD CONSTRAINT COUNCILMAN_MEMBERS_FK FOREIGN KEY ( MEMBERS_ID ) REFERENCES MEMBERS ( MEMBERS_ID ) ;

ALTER TABLE DUES ADD CONSTRAINT DUES_MEMBERS_FK FOREIGN KEY ( MEMBERS_MEMBERS_ID ) REFERENCES MEMBERS ( MEMBERS_ID ) ;

ALTER TABLE SPONSORED_BY ADD CONSTRAINT FK_ASS_52 FOREIGN KEY ( SPONSOR_ID ) REFERENCES SPONSOR ( SPONSOR_ID ) ;

ALTER TABLE SPONSORED_BY ADD CONSTRAINT FK_ASS_53 FOREIGN KEY ( PRODUCTION_ID ) REFERENCES PRODUCTION ( PRODUCTION_ID ) ;

ALTER TABLE CAST_IN ADD CONSTRAINT FK_ASS_56 FOREIGN KEY ( CAST_ID ) REFERENCES CAST ( CAST_ID ) ;

ALTER TABLE CAST_IN ADD CONSTRAINT FK_ASS_57 FOREIGN KEY ( PRODUCTION_ID ) REFERENCES PRODUCTION ( PRODUCTION_ID ) ;

ALTER TABLE WORKING_MEM ADD CONSTRAINT FK_ASS_60 FOREIGN KEY ( MEMBERS_ID ) REFERENCES MEMBERS ( MEMBERS_ID ) ;

ALTER TABLE WORKING_MEM ADD CONSTRAINT FK_ASS_61 FOREIGN KEY ( JOB_ID ) REFERENCES JOB ( JOB_ID ) ;

ALTER TABLE WORKING_SPEC ADD CONSTRAINT FK_ASS_64 FOREIGN KEY ( JOB_ID ) REFERENCES JOB ( JOB_ID ) ;

ALTER TABLE WORKING_SPEC ADD CONSTRAINT FK_ASS_65 FOREIGN KEY ( SPECIALIST_ID ) REFERENCES SPECIALIST ( SPECIALIST_ID ) ;

ALTER TABLE JOB ADD CONSTRAINT JOB_PRODUCTION_FK FOREIGN KEY ( PRODUCTION_PRODUCTION_ID ) REFERENCES PRODUCTION ( PRODUCTION_ID ) ;

ALTER TABLE PRODUCTION ADD CONSTRAINT PRODUCTION_MEMBERS_FK FOREIGN KEY ( MEMBERS_MEMBERS_ID ) REFERENCES MEMBERS ( MEMBERS_ID ) ;

ALTER TABLE PRODUCTION ADD CONSTRAINT PRODUCTION_PLAY_FK FOREIGN KEY ( PLAY_PLAY_ID ) REFERENCES PLAY ( PLAY_ID ) ;

-- Error - Foreign Key Relation_14 has no columns

-- Error - Foreign Key Relation_14v1 has no columns

-- Error - Foreign Key Relation_3 has no columns

-- Error - Foreign Key Relation_3v1 has no columns

ALTER TABLE TICKET ADD CONSTRAINT TICKET_PRODUCTION_FK FOREIGN KEY ( PRODUCTION_PRODUCTION_ID ) REFERENCES PRODUCTION ( PRODUCTION_ID ) ;

ALTER TABLE TICKET ADD CONSTRAINT TICKET_SALE_FK FOREIGN KEY ( SALE_INVOICE_NUMBER ) REFERENCES SALE ( INVOICE_NUMBER ) ;

-- Error - Foreign Key WORKING_MEM has no columns

-- Error - Foreign Key WORKING_MEMv1 has no columns

-- Error - Foreign Key WORKING_SPEC has no columns

-- Error - Foreign Key WORKING_SPECv1 has no columns

CREATE SEQUENCE JOB_JOB_ID_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER JOB_JOB_ID_TRG BEFORE
  INSERT ON JOB FOR EACH ROW WHEN (NEW.JOB_ID IS NULL) BEGIN :NEW.JOB_ID := JOB_JOB_ID_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE SPONSOR_SPONSOR_ID_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER SPONSOR_SPONSOR_ID_TRG BEFORE
  INSERT ON SPONSOR FOR EACH ROW WHEN (NEW.SPONSOR_ID IS NULL) BEGIN :NEW.SPONSOR_ID := SPONSOR_SPONSOR_ID_SEQ.NEXTVAL;
END;
/

 --Plays Insert
INSERT INTO PLAY VALUES(0, 'MacBeth', 5, 'William', 'Shakespear', 'Tragety');

INSERT INTO PLAY VALUES(1, 'Romeo and Juliet', 5, 'William', 'Shakespear', 'Romance');

INSERT INTO PLAY VALUES(2, 'Hamlet', 5, 'William', 'Shakespear', 'Tragedy');

INSERT INTO PLAY VALUES(3, 'The Importance of Being Earnest', 5, 'Oscar',
'Wilde', 'Comedy');

INSERT INTO PLAY VALUES(4, 'The Crucible', 5, 'Arthur', 'Miller', 'Tragedy');

--Members Insert
INSERT INTO MEMBERS VALUES(0, 'Bob', 'Bobberton', 'Actor', '1234567891', 
'bboberton@gmail.com', '1 First St', 'Bobsville', 'NC', '28941', '11-OCT-16', '1');

INSERT INTO MEMBERS VALUES(1, 'Han', 'Some', 'Actor', '4658746454', 
'iamhansome@gmail.com', '5 Lane Drive', 'Zeville', 'NC', '26592', '1-JAN-5', '1');

INSERT INTO MEMBERS VALUES(2, 'Pattie', 'McCake', 'Actor', '546554135', 
'pattiecakes@mail.com', '8 Bakersfield Lane', 'Zeville', 'NC', '26592', '1-JAN-30', '1');

INSERT INTO MEMBERS VALUES(3, 'Strong', 'McLifts', 'Worker', '5546817654', 
'pickstuffup@mail.com', '85 Weight Ave', 'Liftston', 'NC', '26592', '15-MAY-15', '1');

INSERT INTO MEMBERS VALUES(4, 'Britney', 'Lights', 'Worker', '8952135648', 
'brightlight@mail.com', '55 Blind St', 'Bobsville', 'NC', '28941', '2-APR-12', '1');

INSERT INTO MEMBERS VALUES(5, 'Quinton', 'Quits', 'Worker', '546876135', 
'quintonquit@mail.com', '1 Left Lane', 'Zeville', 'NC', '26592', '5-NOV-01', '0');

INSERT INTO MEMBERS VALUES(6, 'Mr', 'Bossman', 'Producer', '7685747583',
'ibossyou@gmail.com', '23 Command Rd', 'Liftston', 'NC', '26592', '1-SEP-14', '1');

--Production Insert
INSERT INTO PRODUCTION VALUES(0, '20-NOV-16', null, 2, 6);
INSERT INTO PRODUCTION VALUES(1, '31-DEC-16', null, 4, 6);
INSERT INTO PRODUCTION VALUES(2, '15-JAN-16', 'Went Great: 10/10', 1, 0);
INSERT INTO PRODUCTION VALUES(3, '31-JAN-16', 'Went Well: 7/10', 3, 6);

--Councilman Insert
INSERT INTO COUNCILMAN VALUES('President', '2016', 6);
INSERT INTO COUNCILMAN VALUES('Vice President', '2016', 2);
INSERT INTO COUNCILMAN VALUES('Treasurer', '2016', 0);
INSERT INTO COUNCILMAN VALUES('Secretary', '2016', 1);
INSERT INTO COUNCILMAN VALUES('House Manager', '2016', 5);

--Dues Insert
INSERT INTO DUES VALUES('0', '5.00', '2016', 0);
INSERT INTO DUES VALUES('1', '50.00', '2015', 0);
INSERT INTO DUES VALUES('0', '45.00', '2016', 1);
INSERT INTO DUES VALUES('1', '50.00', '2016', 2);


 
 